<!-- <vex-secondary-toolbar current="Dashboards">
  <vex-breadcrumbs
    [crumbs]="['Dashboards', 'Student']"
    class="flex-auto"></vex-breadcrumbs>

  <button class="ml-2" color="primary" mat-icon-button type="button">
    <mat-icon svgIcon="mat:more_vert"></mat-icon>
  </button>
</vex-secondary-toolbar> -->

<!--
<div class="container p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
  <video autoplay muted loop playsinline style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
    <source src="../../../../assets/priming.mp4" type="video/mp4">
  </video>
</div>-->


<vex-page-layout mode="card">

  <vex-page-layout-content class="container">

    <div @fadeInUp class="card overflow-hidden">

      <mat-horizontal-stepper #stepper="matHorizontalStepper" [linear]="true">
        <ng-template matStepperIcon="edit">
          <mat-icon svgIcon="mat:done_all"></mat-icon>
        </ng-template>

        <ng-template matStepperIcon="done">
          <mat-icon svgIcon="mat:done_all"></mat-icon>
        </ng-template>

        <mat-step>
          <ng-template matStepLabel>Course</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Lesson</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Lesson Done</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Text</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Phase</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>YouTube</ng-template>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Graph</ng-template>
        </mat-step>

      </mat-horizontal-stepper>
    </div>

    <div class="card">

      <mat-tab-group>


        <mat-tab label="Priming Course">
          <div class="p-4">
            <div class="panel">
              <div class="container p-2
                grid grid-cols-1
                sm:grid-cols-1
                md:grid-cols-2
                gap-2">

                <vex-widget-assistant class="sm:col-span-1">
                </vex-widget-assistant>

                <!-- Waveform -->

                <div #waveform autoplay matTooltip="Time Current: {{currentTime}}" style="cursor: pointer;"
                  [style.left]="progressPercentage + '%'">
                  <div class="time-indicator" [style.left]="progressPercentage + '%'">

                    <!-- Volume com ícone -->

                    <mat-icon svgIcon="mat:volume_up"></mat-icon>
                    <mat-slider id="1" color="accent" discrete [max]="100" [min]="0" [step]="1" showTickMarks
                      (input)="onVolumeChange($event)"><input matSliderThumb value="10" />
                    </mat-slider>

                    <!-- Velocidade com ícone -->

                    <mat-icon svgIcon="mat:speed"></mat-icon>
                    <mat-slider color="warn" discrete [max]="200" [min]="50" [step]="10" showTickMarks
                      (input)="onSpeedChange($event)"><input matSliderThumb value="100" />
                    </mat-slider>

                  </div>

                  <button mat-icon-button matTooltip="Play Waveform {{currentTime}} " (click)="playAudio()">
                    <mat-icon svgIcon="mat:play_arrow"></mat-icon>
                  </button>

                  <button mat-icon-button matTooltip="Stop Waveform {{currentTime}} " (click)="stopAudio()">
                    <mat-icon svgIcon="mat:stop"></mat-icon>
                  </button>

                  <button mat-icon-button matTooltip="Pause Waveform {{currentTime}} " (click)="pauseAudio()">
                    <mat-icon svgIcon="mat:pause_circle"></mat-icon>
                  </button>

                  <button mat-icon-button matTooltip="Download file Waveform {{currentTime}} "
                    (click)="toggleMediaControls()">
                    <mat-icon *ngIf="mediaControlIcon === 'mat:sports_esports'" svgIcon="mat:sports_esports"></mat-icon>
                    <mat-icon *ngIf="mediaControlIcon === 'mat:cloud_download'" svgIcon="mat:cloud_download"></mat-icon>
                  </button>
                  <br>
                </div>

                <!-- Quick Line Chart -->
                <vex-widget-quick-line-chart #chatContainer icon="mat:pageview"
                  iconClass="text-primary-600 bg-primary-600/10" label="
                  Mom, Dad, Baby, Sister, Brother, Grandma, Grandpa, Dog, Cat, Bird, Fish, Cow, Pig, Horse, Sheep, Duck, Chicken,
Tree, Flower, Grass, Sun, Moon, Star, Cloud, Rain, Snow, Wind, Water, Fire, Earth, Sky, Sand, Sea, River, Lake,
Mountain, Hill, Valley, Forest, Park, Eat, Sleep, Play, Drink, Run, Jump, Walk, Talk, Sing, Laugh,
Yes, No, Thank you, Please, Bye-bye, Hello, Good morning, Good night, I love you, Me too,
Car, Truck, Bus, Bike, Ball, Toy, Book, House, Room, Bed, Chair, Table, Door, Window, Light,
Food, Milk, Juice, Apple, Banana, Orange, Bread, Soup, Egg, Cheese, Ice Cream, Candy, Cookie, Cake,
Bath, Shower, Clothes, Shoes, Hat, Coat, Colors (red, blue, green, yellow, etc.), Shapes (circle, square, triangle, etc.),
Go, Stop, Come, See, Look, Listen, Cry, Help, Want, Need, Big, Small, Hot, Cold, Happy, Sad, Mine,
Here, There, Up, Down, In, Out
                  " value="{{ questionText }}">
                  <div class="loading-indicator" *ngIf="isLoading">
                    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
                  </div>
                </vex-widget-quick-line-chart>

                <!-- Quick Line Chart -->
                <vex-widget-quick-line-chart id="textDisplay" #chatContainer icon="mat:pageview"
                  iconClass="text-primary-600 bg-primary-600/10" label="Result" value="{{ chatMessage }}">
                  <div class="loading-indicator" *ngIf="isLoading">
                    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
                  </div>
                </vex-widget-quick-line-chart>


                <!-- Text Area for Question Input -->
                <div class="question-form">
                  <div class="loading-indicator" *ngIf="isLoading">
                    <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
                  </div>
                  <textarea matTooltip="Priming GPT Help Text Area" (paste)="questionToOpenAI(questionText)"
                    (keyup.enter)="questionToOpenAI(questionText)" cols="100" rows="15" type="text"
                    [(ngModel)]="questionText" placeholder="What is your doubt ?"></textarea>
                </div>
              </div>
              <div>
              </div>
              <div class="container p-6 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                <div class="loading-indicator" *ngIf="isLoading">
                  <mat-progress-spinner mode="indeterminate" color="accent"></mat-progress-spinner>
                </div>
                <div class="error-message" *ngIf="errorText">
                  <p>{{ errorText }}</p>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>


        <mat-tab label="Priming Lesson">
          <div class="p-6">

            <table mat-table [dataSource]="(courses$ | async) || []" class="mat-elevation-z8">

              <!-- Coluna para '_id' -->
              <ng-container matColumnDef="_id">
                <th mat-header-cell *matHeaderCellDef> ID </th>
                <td mat-cell *matCellDef="let course"> {{ course._id || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna Nome do Curso -->
              <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Nome </th>
                <td mat-cell *matCellDef="let course"> {{ course.name || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna Objetivo do Curso -->
              <ng-container matColumnDef="objective">
                <th mat-header-cell *matHeaderCellDef> Objetivo </th>
                <td mat-cell *matCellDef="let course"> {{ course.objective || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna Categoria do Curso -->
              <ng-container matColumnDef="category">
                <th mat-header-cell *matHeaderCellDef> Categoria </th>
                <td mat-cell *matCellDef="let course"> {{ course.category || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna para 'level' -->
              <ng-container matColumnDef="level">
                <th mat-header-cell *matHeaderCellDef> Nível </th>
                <td mat-cell *matCellDef="let course"> {{ course.level || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna para 'price' -->
              <ng-container matColumnDef="price">
                <th mat-header-cell *matHeaderCellDef> Preço </th>
                <td mat-cell *matCellDef="let course"> {{ course.price || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna para 'status' -->
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let course"> {{ course.status || 'Não disponível'}} </td>
              </ng-container>

              <!-- Coluna para 'content' -->
              <ng-container matColumnDef="content">
                <th mat-header-cell *matHeaderCellDef> Conteúdo (Qtd) </th>
                <td mat-cell *matCellDef="let course"> {{ course.content.length || 'Não disponível'}} itens </td>
              </ng-container>

              <!-- Coluna para visualizar 'lessons' -->
              <ng-container matColumnDef="lessons">
                <th mat-header-cell *matHeaderCellDef> Lições </th>
                <td mat-cell *matCellDef="let course">
                  <button mat-button (click)="openLessonsDialog(course.lessons)">Ver Lições ({{course.lessons.length ||
                    'Não disponível'}})</button>
                </td>
              </ng-container>

              <!-- Cabeçalho e linhas da tabela -->
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>


          </div>
        </mat-tab>
        <mat-tab label="Priming Lesson Done">
          <div class="p-6">

          </div>
        </mat-tab>
        <mat-tab label="Priming Text">
          <div class="p-6">
            <vex-page-layout-demo></vex-page-layout-demo>
          </div>
        </mat-tab>
        <mat-tab label="Priming Phrase">
          <div class="p-6">
            <vex-page-layout-demo></vex-page-layout-demo>
          </div>
        </mat-tab>
        <mat-tab label="Priming YouTube">
          <div class="p-6">
            <vex-page-layout-demo></vex-page-layout-demo>
          </div>
        </mat-tab>
        <mat-tab label="Priming Zettelkasten">
          <div class="p-6">
            <img src="assets/img/zettelkasten/zettelkasten_steeps.png" alt="Zettelkasten">
            <p>
          </div>
        </mat-tab>
        <mat-tab label="Priming Books">
          <div class="p-6">
            <vex-page-layout-demo></vex-page-layout-demo>
          </div>
        </mat-tab>
        <mat-tab label="Priming Word List">
          <div class="p-6">
            <vex-page-layout-demo></vex-page-layout-demo>
          </div>
        </mat-tab>
        <mat-tab label="Priming Graph View">
          <div class="p-6">
            <span class="material-symbols-outlined">
              hub
            </span>
          </div>
        </mat-tab>

        <!--         <ng-container matColumnDef="lessons">
          <th mat-header-cell *matHeaderCellDef> Lições </th>
          <td mat-cell *matCellDef="let course">
            <button mat-button (click)="openLessonsDialog(course.lessons)">Ver Lições</button>
          </td>
        </ng-container> -->

      </mat-tab-group>
    </div>
  </vex-page-layout-content>
</vex-page-layout>
